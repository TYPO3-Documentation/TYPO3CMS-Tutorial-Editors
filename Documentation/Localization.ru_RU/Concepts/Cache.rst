.. include:: /Includes.rst.txt

.. _cache:

===========
Кэширование
===========

Создание страницы для отображения во внешнем интерфейсе требует времени и ресурсов.

TYPO3 (и многие другие CMS) используют кэширование для сокращения времени и ресурсов, необходимых для создания страницы.

При отображении страницы во внешнем интерфейсе TYPO3 сначала проверяет, находится ли эта страница в кэше и была ли она уже обработана. Если страница найдена в кэше, то сразу же выдается ранее созданный результат. Если страница не найдена в кэше, то она генерируется путем сбора данных из различных источников и выполнения некоторых вычислений. Результат выдается посетителю и сохраняется для дальнейшего использования.

.. _browser-cache:

Кэш браузера
============

Браузер на клиентской машине (Chrome, Edge, Firefox и т.д.) также кэширует страницы. Иногда изменения, внесенные в страницу, не видны из-за того, что браузер кэшировал старое содержимое.

Способ очистки кэша браузера зависит от браузера и операционной системы.

Под Windows в большинстве браузеров для очистки кэша браузера можно нажать :kbd:`Ctrl` + :kbd:`F5`.

Автоматическая очистка кэша
===========================

В TYPO3 кэш страницы очищается автоматически в следующих случаях:

*  Вы изменили что-то в самой странице (записи), например, ее название.
*  Вы изменили содержимое страницы, например, текст или изображение на этой странице.
*  Через определенные промежутки времени, обычно один раз в день.
*  Если содержимое, для которого задано время начала или окончания, становится видимым или невидимым.
*  В некоторых других случаях, которые может определить ваш интегратор или разработчик.

Сценарий: Изменения не видны на сайте
=====================================

Если кэш не был автоматически очищен, то внесенные изменения могут быть не сразу видны на сайте.

Некоторые ситуации, когда может потребоваться ручная очистка кэша:

*  Изменили заголовок страницы. Вы просматриваете затронутую страницу, и все выглядит нормально. Затем переходите на стартовую страницу и не видите в меню своего изменения. Произошло следующее: При изменении заголовка страницы удаляется кэш этой страницы. Однако кэш других страниц, например стартовой, при этом не удаляется.

*  Добавлена запись новости. Она не отображается в списке новостей. Создание записи не приводит к автоматическому удалению кэша какой-либо страницы, если только интегратор не произвел какие-либо настройки.

*  Изменено содержимое одной страницы, которое должно отображаться и на других страницах. Это часто происходит со статическими частями страницы, которые должны быть доступны для редактирования, например, нижний колонтитул, карусель в заголовке и т. д.

Ручная очистка кэша
===================

В большинстве установок очистка кэша одной страницы может быть выполнена без каких-либо последствий.

Чтобы очистить кэш этой страницы, перейдите в модуль :guilabel:`Веб > Страница` / :guilabel:`Web > Page` и нажмите кнопку, изображающую молнию с подсказкой :guilabel:`Очистить кэш для этой страницы` / :guilabel:`Clear cache for this page`.

.. figure:: /Images/ManualScreenshots/Cache/ClearPageCache.png
   :alt: Очистить кэш для этой страницы

   Очистить кэш для этой страницы

При перезагрузке затронутой страницы изменения должны быть видны сразу же. Если изменения не видны, очистите :ref:`browser-cache`. Или воспользуйтесь вкладкой инкогнито в браузере.

Очистить кэш всех страниц могут только редакторы, обладающие соответствующими правами. Если вы не видите на панели инструментов кнопку в виде молнии рядом с кнопкой меню помощи, то, возможно, у вас нет прав для выполнения этого действия:

.. figure:: /Images/ManualScreenshots/Cache/ClearAllPageCaches.png
   :alt: Очистка кеша всех страниц

   Очистка кеша **всех** страниц

.. warning:: После очистки кэша каждая страница должна быть сгенерирована заново при первом запросе к ней. Для этого требуются ресурсы сервера, такие как процессор и жесткий диск. Если одновременно генерируется слишком много страниц, то их формирование может занять много времени (возможно, несколько минут вместо нескольких секунд) или вообще завершиться неудачей. Поэтому некоторые инсталляции TYPO3 не позволяют вручную очищать кэш. О предпочтительной стратегии можно поговорить с администратором.

Предварительный просмотр страницы без очистки кэша
==================================================

Если необходимо предварительно просмотреть страницу, а очистить ее кэш невозможно, можно воспользоваться параметром :code:`no_cache=1`, чтобы просмотреть страницу в том виде, в котором она будет выглядеть после очистки кэша. Однако эта опция может быть отключена администратором.

Например, посетите
:samp:`https://example.org/community/events?no_cache=1`.
